# Auth Service Development Dockerfile
FROM oven/bun:latest

WORKDIR /app

# Install dependencies
COPY package.json bun.lockb tsconfig.json ./
RUN bun install

# Copy source code
COPY src/ ./src/
COPY ../../shared ./shared

# Install curl for health checks
RUN apk add --no-cache curl

EXPOSE 3001
EXPOSE 9229  # Debug port
ENV NODE_ENV=development
CMD ["bun", "--watch", "--inspect=0.0.0.0:9229", "src/index.ts"]